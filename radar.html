<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>StormBuddy Radar</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f0f8ff;
    text-align: center;
    margin: 0; padding: 2rem;
  }
  input, button {
    font-size: 1rem;
    padding: 0.5rem 1rem;
    border-radius: 10px;
    border: 1px solid #ccc;
    margin: 0.5rem;
  }
  button {
    background: #a0d8ff;
    border: none;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background: #82caff;
  }
  iframe {
    margin-top: 2rem;
    border-radius: 20px;
    border: none;
    width: 90vw;
    max-width: 1000px;
    height: 500px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.07);
  }
</style>
</head>
<body>

<h2>StormBuddy Weather Radar</h2>
<p>Enter location or ZIP code:</p>
<input id="locInput" type="text" placeholder="e.g. New York or 90210" />
<button onclick="showRadar()">Show Radar</button>

<iframe id="radarFrame" src="https://embed.rainviewer.com/map.html?loc=39.8283,-98.5795,4"></iframe>

<script>
  function showRadar() {
    const loc = document.getElementById('locInput').value.trim();
    if (!loc) {
      alert('Please enter a location or ZIP code');
      return;
    }
    // Use Nominatim open free geocoding API (no keys, but very lightweight)
    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(loc)}`)
      .then(res => res.json())
      .then(data => {
        if (!data.length) {
          alert('Location not found');
          return;
        }
        const lat = data[0].lat;
        const lon = data[0].lon;
        // Update iframe src with new location & zoom 8 (zoom adjustable)
        document.getElementById('radarFrame').src = `https://embed.rainviewer.com/map.html?loc=${lat},${lon},8`;
      })
      .catch(() => alert('Failed to find location'));
  }
</script>

</body>
</html>
